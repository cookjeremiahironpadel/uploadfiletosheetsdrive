<!DOCTYPE html>
<html>
<head>
<base target="_top">
<link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">
<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<!-- Style The Contact Form How Ever You Prefer -->
<link rel="stylesheet" href="style.css">

</head>
<body>


<form class="gform pure-form pure-form-stacked" id="form" action="IMPORTANT PUT YOUR UNIQUE GOOGLE APPS SCRIPT WEBAPP URL HERE" target="my-iframe" method="POST" >
  <input type="hidden" value="" name="fileContent" id="fileContent">
  <input type="hidden" value="" name="filename" id="filename">
  
  <div class="form-elements">
  
			<fieldset class="pure-group">
			  <label> Name : </label><input required type="text" value="" name="name" id="name">
			</fieldset>
			
			<fieldset class="pure-group">
			  <label> Email :</label> <input required type="text" value="" name="email" id="email">  
			</fieldset>
			
			 <input type="hidden" value="" name="contact" id="contact">
			 <input type="hidden" value="" name="skillsets" id="skillsets">
			 <input type="hidden" value="" name="linkedinUrl" id="linkedinUrl">   
			
</form>
<iframe name="my-iframe" src="IMPORTANT PUT YOUR UNIQUE GOOGLE APPS SCRIPT WEBAPP URL HERE" style="display: none;" onload="changed()" ></iframe>
<p></p>
<input required id="attach" name="attach" type="file"/>
<p></p>
<p></p>


<input value="Submit" type="button" onclick="UploadFile();" />
<p><span id='display'></span></p>


<script type="text/javascript">




var progressbar = document.createElement("PROGRESS");
  progressbar.setAttribute("value", "0");
  progressbar.setAttribute("max", "100");

var change_count = 0;
function changed() {

  document.body.appendChild(progressbar);


    if (change_count === 1 /* NUMBER OF FORM PAGES */) {
	    setTimeout(function(){progressbar.setAttribute("value", "92") }, 100);
        setTimeout(function(){progressbar.setAttribute("value", "95") }, 100);
        setTimeout(function(){progressbar.setAttribute("value", "97") }, 100);
        setTimeout(function(){progressbar.setAttribute("value", "100") }, 100);
		console.log('iframe source has changed: ', change_count);
		
		//setTimeout(function(){alert('File Upload Completed')}, 200);
        setTimeout(function(){document.getElementById('display').innerHTML = 
                    'File uploaded successfully.';}, 200);
		//document.getElementById('display').innerHTML = 
         //           'File uploaded successfully.';
		document.getElementById("form").reset()
		document.getElementById('attach').value= null;
		
		
		
    }
    else {

        window.change_count += 1;

    }
}

      console.log('helloworld');




function UploadFile() {

//event.preventDefault()

  progressbar.setAttribute("value", "22");
 



  var reader = new FileReader();
  var file = document.getElementById('attach').files[0];
  reader.onload = function(){
    document.getElementById('fileContent').value=reader.result;
	document.getElementById('filename').value=file.name;
    document.getElementById('form').submit();
	}
  reader.readAsDataURL(file);
  
  setTimeout(function(){progressbar.setAttribute("value", "30") }, 500);
  setTimeout(function(){progressbar.setAttribute("value", "50") }, 500);
  setTimeout(function(){progressbar.setAttribute("value", "80") }, 500);	
  
  //file.value = '';
  
  //return false 
}

</script>
</body>
</html>
